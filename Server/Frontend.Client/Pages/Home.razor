@page "/"
@rendermode InteractiveWebAssembly

@using Microsoft.AspNetCore.Components.Authorization
@using MudBlazor

<PageTitle>Home</PageTitle>

<style>
  /* Global Reset */
  html, body, #app {
    margin: 0; padding: 0; overflow-x: hidden;
  }
  /* Full‑Bleed Hero Banner */
  .hero-banner { position: relative; left:50%; margin-left:-50vw; width:100vw; height:100vh; overflow:hidden; }
  .video-wrapper { position:absolute; inset:0; z-index:-1; overflow:hidden; }
  .video-wrapper iframe { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); width:100vw; height:100vh; object-fit: cover; pointer-events:none; }
  .hero-overlay { position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); text-align:center; color:#fff; padding:2rem; max-width:600px; }
  .hero-overlay h1 { font-size:3rem; margin-bottom:1rem; }
  .hero-overlay p  { font-size:1.25rem; margin-bottom:1.5rem; }
  @@media (max-width:768px) { .hero-banner { height:60vh; } .hero-overlay h1 { font-size:2.5rem; } .hero-overlay p  { font-size:1rem; } }
  @@media (max-width:480px) { .hero-banner { height:50vh; } .hero-overlay h1 { font-size:2rem; } .hero-overlay p  { font-size:0.9rem; } }

  /* Feature Cards */
  .section { padding:6rem 2rem; max-width:1200px; margin:auto; }
  .section h2 { text-align:center; margin-bottom:2rem; }
  .feature-card { padding:2rem; text-align:center; border-radius:8px; }

  /* Testimonials */
  .testimonial-header { display:flex; align-items:center; gap:1rem; }

  /* Subscription Plans Cards */
  .plan-card { border-radius:12px; overflow:hidden; box-shadow:0 4px 12px rgba(0,0,0,0.1); transition:transform .3s ease; }
  .plan-card:hover { transform:translateY(-6px); }
  .plan-header { text-align:center; padding:1.5rem 1rem; background:#fff; }
  .plan-content { background:#fafafa; padding:1rem 1.5rem; display:flex; flex-direction:column; align-items:center; gap:1rem; }
  .plan-avatar { border:3px solid #fff; box-shadow:0 2px 6px rgba(0,0,0,0.15); }
  .plan-features { list-style:none; padding:0; margin:0; width:100%; }
  .plan-features li { position:relative; padding-left:1.5rem; margin-bottom:.75rem; }
  .plan-features li::before { content:""; position:absolute; left:0; top:.5rem; width:.5rem; height:.5rem; background:#673AB7; border-radius:50%; }

  /* CTA Footer */
  .cta-footer {
    background: #594AE2;
    color: #fff;
    text-align: center;
    padding: 4rem 2rem;

    /* full-bleed trick */
    position: relative;
    left: 50%;
    right: 50%;
    margin-left: -50vw;
    margin-right: -50vw;
    width: 100vw;
  }
</style>

<CascadingAuthenticationState>
  <AuthorizeView>
    <Authorized>
      <MudContainer MaxWidth="@MaxWidth.False" Class="p-0 section text-center">
        <MudText Typo="@Typo.h4">Welcome back, @context.User.Identity?.Name!</MudText>
      </MudContainer>
    </Authorized>
    <NotAuthorized>

      <!-- Hero Banner -->
      <section class="hero-banner">
        <div class="video-wrapper">
          <iframe
            src="https://player.vimeo.com/video/964455070?background=1&autoplay=1&loop=1&muted=1"
            frameborder="0"
            allow="autoplay; fullscreen; picture-in-picture"
            allowfullscreen>
          </iframe>
        </div>
        <div class="hero-overlay">
          <h1>Track every Turn.</h1>
          <p>Your cycling data at your fingertips. Anywhere. Anytime.</p>
          <MudStack Direction="Row" Spacing="2" Justify="Justify.Center">
            <MudButton Variant="@Variant.Filled" Color="@Color.Primary" Href="/register">Get Started</MudButton>
            <MudButton Variant="@Variant.Outlined" Color="@Color.Secondary" Href="/login">Login</MudButton>
          </MudStack>
        </div>
      </section>

      <MudContainer MaxWidth="@MaxWidth.False" Class="p-0">

        <!-- Features -->
        <section class="section">
          <MudFade Duration="600" Delay="200"><h2>Our Features</h2></MudFade>
          <MudGrid Spacing="3">
            @for(int i = 0; i < FeatureList.Count; i++)
            {
              var f = FeatureList[i];
              <MudItem xs="12" sm="4">
                <MudGrow Duration="500" Delay="@(200 + i * 200)">
                  <MudPaper Class="feature-card" Elevation="1">
                    <MudText Typo="@Typo.h6" GutterBottom="true">@f.Title</MudText>
                    <MudText Typo="@Typo.body2">@f.Description</MudText>
                  </MudPaper>
                </MudGrow>
              </MudItem>
            }
          </MudGrid>
        </section>

        <!-- Testimonials -->
        <section class="section">
          <MudFade Duration="600" Delay="600"><h2>What Our Riders Say</h2></MudFade>
          <MudExpansionPanels Multiple="true">
            @foreach(var t in Testimonials)
            {
              <MudExpansionPanel Text="@t.Name"
                                 ExpandedIcon="Icons.Material.Filled.ExpandLess"
                                 CollapsedIcon="Icons.Material.Filled.ExpandMore">
                <MudGrid>
                  <MudItem xs="2">
                    <MudAvatar Image="@t.ImgUrl" Size="Size.Medium" />
                  </MudItem>
                  <MudItem xs="10">
                    <MudText Typo="@Typo.body1">“@t.Text”</MudText>
                    <MudText Typo="@Typo.caption">– @t.Name, @t.Role</MudText>
                  </MudItem>
                </MudGrid>
              </MudExpansionPanel>
            }
          </MudExpansionPanels>
        </section>

        <!-- Subscription Plans -->
        <section class="section">
          <MudFade Duration="600"><h2>Subscription Plans</h2></MudFade>
          <MudGrid Spacing="3">
            @foreach(var p in Plans)
            {
              <MudItem xs="12" sm="6" md="3">
                <Mudcard Text="@p.Title"
                                   ExpandedIcon="Icons.Material.Filled.ExpandLess"
                                   CollapsedIcon="Icons.Material.Filled.ExpandMore"
                                   Elevation="0"
                                   Class="plan-card">
                  <div class="plan-content">
                    <MudText Typo="@Typo.h5">@p.Price</MudText>
                    <MudAvatar Image="@p.Avatar" Size="Size.Large" Class="plan-avatar" />
                    <ul class="plan-features">
                      @foreach(var feat in p.Features)
                      { 
                        <li>@feat</li>
                      }
                    </ul>
                    <MudButton Variant="@Variant.Filled" Color="@Color.Secondary" FullWidth="true">Choose</MudButton>
                  </div>
                </Mudcard>
              </MudItem>
            }
          </MudGrid>
        </section>

        <!-- Call to Action Footer -->
        <MudFade Duration="600" Delay="1200">
          <section class="cta-footer">
            <MudText Typo="@Typo.h4" Class="mb-3">Ready to Ride?</MudText>
            <MudButton Variant="@Variant.Filled" Color="@Color.Secondary" Size="Size.Large" Href="/register">
              Join Cyclone Now
            </MudButton>
          </section>
        </MudFade>

      </MudContainer>
    </NotAuthorized>
  </AuthorizeView>
</CascadingAuthenticationState>

@code {
  class Feature { public string Title { get; set; } = ""; public string Description { get; set; } = ""; }
  class Testimonial { public string Name { get; set; } = ""; public string ImgUrl { get; set; } = ""; public string Text { get; set; } = ""; public string Role { get; set; } = ""; }
  class Plan { public string Title { get; set; } = ""; public string Price { get; set; } = ""; public string Avatar { get; set; } = ""; public List<string> Features { get; set; } = new(); }

  private List<Feature> FeatureList = new()
  {
    new Feature { Title="Live Tracking", Description="Receive real‑time speed, distance, elevation, and performance alerts." },
    new Feature { Title="Analytics",    Description="Analyze sessions with AI‑driven charts and export detailed reports." },
    new Feature { Title="Community",    Description="Join challenges, share routes, earn badges, and compete." }
  };

  private List<Testimonial> Testimonials = new()
  {
    new Testimonial {
      Name="Alex Rider",
      ImgUrl="https://img.freepik.com/fotos-kostenlos/smiley-mann-der-sich-draussen-entspannt_23-2148739334.jpg",
      Text="Boosted my performance!",
      Role="Competitive Cyclist"
    },
    new Testimonial {
      Name="Maria Wheels",
      ImgUrl="https://images.bravo.de/das-verrat-dein-profilbild-uber-dich-selfie,id=e8f96e08,b=bravo,w=1600,rm=sk.jpeg",
      Text="Community keeps me motivated.",
      Role="Fitness Enthusiast"
    },
    new Testimonial {
      Name="John Trail",
      ImgUrl="https://i.pinimg.com/236x/b1/e9/88/b1e988b2e1295930db530b1d257a5a31.jpg",
      Text="Discovering new routes is amazing.",
      Role="Adventure Seeker"
    },
    new Testimonial {
      Name="Sarah Pace",
      ImgUrl="https://www.businessinsider.de/wp-content/uploads/2017/04/5eaa81c1981b7.jpg",
      Text="Intuitive dashboard & real-time stats.",
      Role="Weekend Rider"
    }
  };

  private List<Plan> Plans = new()
  {
    new Plan {
      Title="Basic Plan", Price="$50",
      Avatar="https://img.freepik.com/fotos-kostenlos/smiley-mann-der-sich-draussen-entspannt_23-2148739334.jpg",
      Features=new() { "Up to 3 rides/month", "Basic tracking", "Community access" }
    },
    new Plan {
      Title="Standard Plan", Price="$100",
      Avatar="https://images.bravo.de/das-verrat-dein-profilbild-uber-dich-selfie,id=e8f96e08,b=bravo,w=1600,rm=sk.jpeg",
      Features=new() { "Unlimited rides", "Detailed analytics", "Route planning" }
    },
    new Plan {
      Title="Business Plan", Price="$200",
      Avatar="https://i.pinimg.com/236x/b1/e9/88/b1e988b2e1295930db530b1d257a5a31.jpg",
      Features=new() { "Team sharing", "Advanced reports", "Custom challenges" }
    },
    new Plan {
      Title="Premium Plan", Price="$300",
      Avatar="https://www.businessinsider.de/wp-content/uploads/2017/04/5eaa81c1981b7.jpg",
      Features=new() { "All features", "Personal coaching", "Priority support" }
    }
  };
}
