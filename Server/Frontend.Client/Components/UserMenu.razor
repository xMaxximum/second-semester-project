@using Frontend.Client.Services
@rendermode InteractiveWebAssembly
@inject AuthService AuthService
@inject NavigationManager Navigation
@inject NavigationManager NavigationManager


<AuthorizeView>
    <Authorized>
        <MudNavLink Href="/profile" Icon="@Icons.Material.Filled.AccountCircle" OnClick="CloseDrawer">Profile</MudNavLink>
        <MudMenuItem Icon="@Icons.Material.Filled.Logout" OnClick="@HandleLogout">Logout</MudMenuItem>
    </Authorized>
    <NotAuthorized>
        <MudNavLink Href="/login" Icon="@Icons.Material.Filled.Login" OnClick="CloseDrawer">Login</MudNavLink>
        <MudNavLink Href="/register" Icon="@Icons.Material.Filled.AppRegistration" OnClick="CloseDrawer">Register</MudNavLink>
    </NotAuthorized>
</AuthorizeView>

@code {
    private async Task HandleLogout()
    {
        await AuthService.LogoutAsync();
        Navigation.NavigateTo("/");
    }
    
    private bool _drawerOpen;

    void ToggleDrawer() => _drawerOpen = !_drawerOpen;
    void CloseDrawer() => _drawerOpen = false;
}
